<%- include('template/header'); %>
  <h1 style="background-color: aquamarine;">Loja - Produtos</h1>
  <h2>Novo Produto</h2>
  <% categoria.forEach(cat=> { %>
    <input type="hidden" id="<%= cat.valor %>" value="<%= cat.campoPersonalizado %>"> </input>
  <% })%> 
  <form action="/produto-salvar" method="POST">
    <label>ID:</label>
    <% if(produto.length> 0) { %>
      <% let idProduto=produto.length; %>
        <input type="text" readonly id="id" name="id" value="<%= idProduto %>"><br>

        <% } else { %>
          <% let idProduto=0; %>
            <input type="text" readonly id="id" name="id" value="<%= idProduto %>"><br>
            <% } %>
              <label>Nome:</label>
              <input type="text" id="nome" name="nome" required><br>
              <label>Categoria:</label>
              <% if(categoria.length> 0) { %>
                <select id="dados" name="dados">
                  <% categoria.forEach(cat=> { %>
                    <% console.log(cat) %>
                      <option>
                        <%= cat.valor %>
                      </option>
                      <% }) %>
                </select>
                <% } else { %>
                  <select id="dados" name="dados">
                    <option value="1"></option>
                  </select>
                  <% } %>
                    <br>
                    <label>Descrição:</label><br>
                    <textarea type="textarea" id="descricao" name="descricao" required></textarea><br><br>
                    <label>Preço:</label>
                    <input type="text" id="preco" name="preco" required><br>
                    <hr style="width:20%; height:1px;border-width:0;color:gray;background-color:gray">
                    <label>Campos personalizados:</label><br>
                    <div id="formulario">
                      
                    </div>
                    <hr style="width:20%; height:1px;border-width:0;color:gray;background-color:gray">
                    <button>Salvar</button>
  </form>
  <script>
    // $("#dados").change(adicionarCampo(e))
    $('#dados').on('change', function(){
      $("#formulario").append(`<input type="text" name="campoPersonalizado" id="texto" required><br>`);
    })
    function adicionarCampo(e) {
      var id = e.target.value;
      console.log(id);
      var input = document.querySelector("#name");
      var texto = input.value;
    };
  </script>

  <p style="background-color: antiquewhite;"><a href="/home">Inicio</a></p>
  <%- include('template/footer'); %>